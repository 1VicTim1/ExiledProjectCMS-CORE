# Go API SSL Configuration for ExiledProjectCMS

server:
  # Public HTTPS endpoint
  https:
    port: 8443
    cert_file: "/app/ssl/go-api.crt"
    key_file: "/app/ssl/go-api.key"

  # Internal secure endpoint (mutual TLS)
  https_internal:
    port: 8444
    cert_file: "/app/ssl/go-api.crt"
    key_file: "/app/ssl/go-api.key"
    ca_file: "/app/ssl/ca.crt"
    client_auth: "require_and_verify"

  # HTTP endpoint (for health checks only)
  http:
    port: 8080
    enabled: true
    allowed_paths: [ "/health", "/metrics" ]

ssl:
  # Certificate Authority
  ca_cert: "/app/ssl/ca.crt"

  # Client certificate for outbound connections
  client_cert: "/app/ssl/clients/internal-client-client.crt"
  client_key: "/app/ssl/clients/internal-client-client.key"

  # SSL verification settings
  verify_peer: true
  verify_hostname: true

  # Cipher configuration
  min_version: "TLS1.2"
  ciphers: [
    "ECDHE-RSA-AES256-GCM-SHA384",
    "ECDHE-RSA-AES128-GCM-SHA256",
    "DHE-RSA-AES256-GCM-SHA384",
    "DHE-RSA-AES128-GCM-SHA256"
  ]

database:
  # SSL connection string
  url: "${GO_DB_CONNECTION_STRING_SSL}"
  ssl_mode: "require"
  ssl_cert: "/app/ssl/clients/internal-client-client.crt"
  ssl_key: "/app/ssl/clients/internal-client-client.key"
  ssl_ca: "/app/ssl/ca.crt"

redis:
  # Secure Redis connection
  url: "rediss://redis:6380"
  password: "${REDIS_PASSWORD}"
  tls_config:
    cert_file: "/app/ssl/clients/internal-client-client.crt"
    key_file: "/app/ssl/clients/internal-client-client.key"
    ca_file: "/app/ssl/ca.crt"
    server_name: "redis.exiled.local"
    insecure_skip_verify: false

external_services:
  cms_api:
    base_url: "https://cms-api:8443"
    client_cert: "/app/ssl/clients/internal-client-client.crt"
    client_key: "/app/ssl/clients/internal-client-client.key"
    ca_cert: "/app/ssl/ca.crt"
    timeout: 30s

  skins_service:
    base_url: "https://skins-service:8443"
    client_cert: "/app/ssl/clients/internal-client-client.crt"
    client_key: "/app/ssl/clients/internal-client-client.key"
    ca_cert: "/app/ssl/ca.crt"

  email_service:
    base_url: "https://email-service:8443"
    client_cert: "/app/ssl/clients/internal-client-client.crt"
    client_key: "/app/ssl/clients/internal-client-client.key"
    ca_cert: "/app/ssl/ca.crt"

logging:
  level: "info"
  ssl_debug: false  # Set to true for SSL debugging